<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ü—Ä–∏—è—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è üíå</title>
</head>
<body>
  <h1>–ü—Ä–∏—è—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è üíå</h1>
  <p>–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –ø—Ä–∏—è—Ç–Ω—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏.</p>
  <button id="subscribe">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>

  <script>
    const messages = [
      "–Ø –ª—é–±–ª—é —Ç–µ–±—è. –•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è!",
      "–¢—ã –¥–ª—è –º–µ–Ω—è –æ–¥–Ω–∞-–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è.",
      "–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞.",
      "–£–ª—ã–±–Ω–∏—Å—å! –°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å.",
      "–¢—ã –ª—É—á—à–∞—è, —á—Ç–æ —É –º–µ–Ω—è –µ—Å—Ç—å.",
      "–î–µ—Ä–∂–∏—Å—å, —É —Ç–µ–±—è –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è!",
      "–¢—ã –¥–µ–ª–∞–µ—à—å –º–∏—Ä —è—Ä—á–µ!"
    ];

    const times = [8, 13, 23:08]; // —á–∞—Å—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

    document.getElementById('subscribe').addEventListener('click', async () => {
      if (!("Notification" in window)) {
        alert("–≠—Ç–æ—Ç –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.");
        return;
      }

      let permission = await Notification.requestPermission();
      if (permission !== "granted") {
        alert("–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ!");
        return;
      }

      function scheduleNotification(hour) {
        let now = new Date();
        let target = new Date();
        target.setHours(hour, 0, 0, 0);
        if (target < now) target.setDate(target.getDate() + 1);

        let timeout = target - now;
        setTimeout(() => {
          new Notification("üíå –ü—Ä–∏–≤–µ—Ç!", {
            body: messages[Math.floor(Math.random() * messages.length)],
            icon: "https://upload.wikimedia.org/wikipedia/commons/3/3c/Heart_coraz%C3%B3n.svg"
          });
          scheduleNotification(hour); // –ø–æ–≤—Ç–æ—Ä –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
        }, timeout);
      }

      times.forEach(scheduleNotification);
      alert("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã! –î–µ—Ä–∂–∏ –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã—Ç—ã–º —Ö–æ—Ç—è –±—ã –Ω–∞ —Ñ–æ–Ω–µ.");
    });
  </script>
</body>
</html>

