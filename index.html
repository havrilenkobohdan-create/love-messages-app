<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ü—Ä–∏—è—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è üíå</title>
</head>
<body>
  <h1>–ü—Ä–∏—è—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è üíå</h1>
  <p>–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.</p>
  <button id="subscribe">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>

  <script>
    const messages = [
      "–Ø –ª—é–±–ª—é —Ç–µ–±—è. –•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è!",
      "–¢—ã –¥–ª—è –º–µ–Ω—è –æ–¥–Ω–∞-–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è.",
      "–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞.",
      "–£–ª—ã–±–Ω–∏—Å—å! –°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å.",
      "–¢—ã –ª—É—á—à–∞—è, —á—Ç–æ —É –º–µ–Ω—è –µ—Å—Ç—å.",
      "–î–µ—Ä–∂–∏—Å—å, —É —Ç–µ–±—è –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è!",
      "–¢—ã –¥–µ–ª–∞–µ—à—å –º–∏—Ä —è—Ä—á–µ!"
    ];

    document.getElementById('subscribe').addEventListener('click', async () => {
      if (!("Notification" in window)) {
        alert("–≠—Ç–æ—Ç –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.");
        return;
      }

      let permission = await Notification.requestPermission();
      if (permission !== "granted") {
        alert("–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ!");
        return;
      }

      const now = new Date();
      const times = [
        new Date(now.getTime() + 1*60*1000), // —á–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É
        new Date(now.getTime() + 2*60*1000), // —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã
        new Date(now.getTime() + 3*60*1000)  // —á–µ—Ä–µ–∑ 3 –º–∏–Ω—É—Ç—ã
      ];

      function scheduleNotification(targetTime) {
        let timeout = targetTime - new Date();
        if (timeout < 0) timeout = 0;

        setTimeout(() => {
          new Notification("üíå –ü—Ä–∏–≤–µ—Ç!", {
            body: messages[Math.floor(Math.random() * messages.length)],
            icon: "https://upload.wikimedia.org/wikipedia/commons/3/3c/Heart_coraz%C3%B3n.svg"
          });
        }, timeout);
      }

      times.forEach(scheduleNotification);
      alert("–¢–µ—Å—Ç–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã! –ñ–¥–∏ 1‚Äì3 –º–∏–Ω—É—Ç—ã.");
    });
  </script>
</body>
</html>
